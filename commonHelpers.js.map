{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst modal = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captions: true,\n    captionsData: \"alt\",\n    captionPosition: 'bottom',\n});\n\nconst galleryContainer = document.querySelector('.gallery');\nconst form = document.getElementById('form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst addImput = document.getElementById('input');\n\nlet currentPage = 1;\nlet perPage = 40;\nlet searchQuery = null;\nloadMoreBtn.addEventListener('click', onLoadMore);\n\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    loader.classList.remove('is-hidden');\n    galleryContainer.innerHTML = \"\";\n    currentPage = 1;\n    searchQuery = e.currentTarget.elements.search.value.trim();\n\n    if (searchQuery !== '') {\n        try {\n            const data = await fetchImages(searchQuery, currentPage);\n            if (data.hits.length > 0) {\n                gallery(data.hits);\n                loadMoreBtn.classList.remove('is-hidden')\n\n            } else {\n                loadMoreBtn.classList.add('is-hidden')\n                iziToast.error({\n                    title: 'error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    messageColor: 'white',\n                    backgroundColor: '#EF4040',\n                    maxWidth: 500\n                });\n            }\n\n        } catch (error) {\n            console.error('Error fetching data:', error);\n        } finally {\n            // loader.classList.add('is-hidden');\n        }\n        addImput.value = '';\n    }\n});\n\n\n\nasync function onLoadMore() {\n    loader.classList.remove('is-hidden');\n    currentPage += 1;\n    try {\n        const data = await fetchImages(searchQuery, currentPage);\n\n        if (data.hits.length > 0) {\n            gallery(data.hits);\n\n        } else {\n            iziToast.error({\n                title: 'error',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                messageColor: 'white',\n                backgroundColor: '#EF4040',\n                maxWidth: 500\n            });\n\n            loadMoreBtn.classList.add('is-hidden');\n        }\n        const galleryContainerHeight = galleryContainer.getBoundingClientRect().height;\n        window.scrollBy({\n            top: galleryContainerHeight,\n            behavior: \"smooth\",\n        });\n    }\n    catch (error) {\n        console.error('Error fetching data:', error);\n    } finally {\n        loader.classList.add('is-hidden');\n    }\n}\n\nasync function fetchImages(keyword, currentPage) {\n    const key = '42039867-09e41a1320e593858871044dc';\n    const params = new URLSearchParams({\n        key: key,\n        q: keyword,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: perPage\n    });\n\n    const response = await axios.get(`https://pixabay.com/api/?${params}`);\n    return response.data;\n}\n\nconst galleryItem = ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" data-test=\"${largeImageURL}\">\n        </a>\n        <div class=\"image-details\">\n           \n            <div class=\"info-container\">\n                <span class=\"info-label\">Likes:</span>\n                <span class=\"info-value\">${likes}</span>\n            </div>\n            <div class=\"info-container\">\n                <span class=\"info-label\">Views:</span>\n                <span class=\"info-value\">${views}</span>\n            </div>\n            <div class=\"info-container\">\n                <span class=\"info-label\">Comments:</span>\n                <span class=\"info-value\">${comments}</span>\n            </div>\n            <div class=\"info-container\">\n                <span class=\"info-label\">Downloads:</span>\n                <span class=\"info-value\">${downloads}</span>\n            </div>\n        </div>\n    </li>`;\n\nconst gallery = (hits) => {\n    const galleryItemHtml = hits.map(galleryItem).join('');\n    galleryContainer.insertAdjacentHTML('beforeend', galleryItemHtml);\n    modal.refresh();\n};\n\n\n\n\n"],"names":["modal","SimpleLightbox","galleryContainer","form","loader","loadMoreBtn","addImput","currentPage","perPage","searchQuery","onLoadMore","e","data","fetchImages","gallery","iziToast","error","galleryContainerHeight","keyword","key","params","axios","galleryItem","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hits","galleryItemHtml"],"mappings":"owBAMA,MAAMA,EAAQ,IAAIC,EAAe,aAAc,CAC3C,aAAc,IACd,SAAU,GACV,aAAc,MACd,gBAAiB,QACrB,CAAC,EAEKC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAO,SAAS,eAAe,MAAM,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAW,SAAS,eAAe,OAAO,EAEhD,IAAIC,EAAc,EACdC,EAAU,GACVC,EAAc,KAClBJ,EAAY,iBAAiB,QAASK,CAAU,EAGhDP,EAAK,iBAAiB,SAAU,MAAOQ,GAAM,CAOzC,GANAA,EAAE,eAAc,EAChBP,EAAO,UAAU,OAAO,WAAW,EACnCF,EAAiB,UAAY,GAC7BK,EAAc,EACdE,EAAcE,EAAE,cAAc,SAAS,OAAO,MAAM,OAEhDF,IAAgB,GAAI,CACpB,GAAI,CACA,MAAMG,EAAO,MAAMC,EAAYJ,EAAaF,CAAW,EACnDK,EAAK,KAAK,OAAS,GACnBE,EAAQF,EAAK,IAAI,EACjBP,EAAY,UAAU,OAAO,WAAW,IAGxCA,EAAY,UAAU,IAAI,WAAW,EACrCU,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,WACV,aAAc,QACd,gBAAiB,UACjB,SAAU,GAC9B,CAAiB,EAGR,OAAQC,EAAP,CACE,QAAQ,MAAM,uBAAwBA,CAAK,CACvD,QAAkB,CAET,CACDV,EAAS,MAAQ,EACpB,CACL,CAAC,EAID,eAAeI,GAAa,CACxBN,EAAO,UAAU,OAAO,WAAW,EACnCG,GAAe,EACf,GAAI,CACA,MAAMK,EAAO,MAAMC,EAAYJ,EAAaF,CAAW,EAEnDK,EAAK,KAAK,OAAS,EACnBE,EAAQF,EAAK,IAAI,GAGjBG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6DACT,SAAU,WACV,aAAc,QACd,gBAAiB,UACjB,SAAU,GAC1B,CAAa,EAEDV,EAAY,UAAU,IAAI,WAAW,GAEzC,MAAMY,EAAyBf,EAAiB,sBAAqB,EAAG,OACxE,OAAO,SAAS,CACZ,IAAKe,EACL,SAAU,QACtB,CAAS,CACJ,OACMD,EAAP,CACI,QAAQ,MAAM,uBAAwBA,CAAK,CACnD,QAAc,CACNZ,EAAO,UAAU,IAAI,WAAW,CACnC,CACL,CAEA,eAAeS,EAAYK,EAASX,EAAa,CAC7C,MAAMY,EAAM,qCACNC,EAAS,IAAI,gBAAgB,CAC/B,IAAKD,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMX,EACN,SAAUC,CAClB,CAAK,EAGD,OADiB,MAAMa,EAAM,IAAI,4BAA4BD,GAAQ,GACrD,IACpB,CAEA,MAAME,EAAc,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,wCAE1DL;AAAA,8CACMD,WAAsBE,iBAAoBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAM7CE;AAAA;AAAA;AAAA;AAAA,2CAIAC;AAAA;AAAA;AAAA;AAAA,2CAIAC;AAAA;AAAA;AAAA;AAAA,2CAIAC;AAAA;AAAA;AAAA,WAKrCf,EAAWgB,GAAS,CACtB,MAAMC,EAAkBD,EAAK,IAAIR,CAAW,EAAE,KAAK,EAAE,EACrDpB,EAAiB,mBAAmB,YAAa6B,CAAe,EAChE/B,EAAM,QAAO,CACjB"}