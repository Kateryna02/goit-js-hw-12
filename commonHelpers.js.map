{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst modal = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captions: true,\n    captionsData: \"alt\",\n    captionPosition: 'bottom',\n});\n\nconst galleryContainer = document.querySelector('.gallery');\nconst form = document.getElementById('form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst addImput = document.getElementById('input');\nconst music = document.querySelector('.music');\n\nlet currentPage = 1;\nlet perPage = 40;\nlet searchQuery = null;\nlet maxPage = 0;\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    galleryContainer.innerHTML = \"\";\n    currentPage = 1;\n    searchQuery = e.currentTarget.elements.search.value.trim();\n    \n\n    if (searchQuery !== '') {\n         loader.classList.remove('is-hidden');\n        try {\n            music.play();\n            const data = await fetchImages(searchQuery, currentPage);\n            maxPage = Math.ceil(data.totalHits / 40);\n            if (data.hits.length > 0) {\n                gallery(data.hits);\n                loadMoreBtn.classList.remove('is-hidden');\n\n                if (currentPage >= maxPage) {\n                    loadMoreBtn.classList.add('is-hidden');\n                  \n                }\n                \n\n            } else {\n                iziToast.error({\n                    title: 'error',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    messageColor: 'white',\n                    backgroundColor: '#EF4040',\n                    maxWidth: 500\n                });\n                stopAudio();\n                loadMoreBtn.classList.add('is-hidden');\n                loader.classList.add('is-hidden');\n            }\n\n        } catch (error) {\n            console.error('Error fetching data:', error);\n            stopAudio();\n        } \n        addImput.value = '';\n     \n        \n    }\n});\nfunction stopAudio() {\n    music.pause();\n    music.currentTime = 0;\n}\n\n\n\nasync function onLoadMore() {\n    loader.classList.remove('is-hidden');\n    currentPage += 1;\n    try {\n        const data = await fetchImages(searchQuery, currentPage);\n        gallery(data.hits)\n\n        if (currentPage >= maxPage) {\n           \n            iziToast.error({\n                title: 'error',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                messageColor: 'white',\n                backgroundColor: '#EF4040',\n                maxWidth: 500\n            });\n\n            loadMoreBtn.classList.add('is-hidden');\n        }\n        const galleryContainerHeight = galleryContainer.getBoundingClientRect().height;\n        window.scrollBy({\n            top: galleryContainerHeight,\n            behavior: \"smooth\",\n        });\n    }\n    catch (error) {\n        console.error('Error fetching data:', error);\n    } finally {\n        loader.classList.add('is-hidden');\n    }\n}\n\n\nasync function fetchImages(keyword, currentPage) {\n    const key = '42039867-09e41a1320e593858871044dc';\n    const params = new URLSearchParams({\n        key: key,\n        q: keyword,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: perPage\n    });\n\n    const response = await axios.get(`https://pixabay.com/api/?${params}`);\n    return response.data;\n}\n\nconst galleryItem = ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" data-test=\"${largeImageURL}\">\n        </a>\n        <div class=\"image-details\">\n           \n            <div class=\"info-container\">\n                <span class=\"info-label\">Likes:</span>\n                <span class=\"info-value\">${likes}</span>\n            </div>\n            <div class=\"info-container\">\n                <span class=\"info-label\">Views:</span>\n                <span class=\"info-value\">${views}</span>\n            </div>\n            <div class=\"info-container\">\n                <span class=\"info-label\">Comments:</span>\n                <span class=\"info-value\">${comments}</span>\n            </div>\n            <div class=\"info-container\">\n                <span class=\"info-label\">Downloads:</span>\n                <span class=\"info-value\">${downloads}</span>\n            </div>\n        </div>\n    </li>`;\n\nconst gallery = (hits) => {\n    const galleryItemHtml = hits.map(galleryItem).join('');\n    galleryContainer.insertAdjacentHTML('beforeend', galleryItemHtml);\n    modal.refresh();\n};\n\n\n\n\n"],"names":["modal","SimpleLightbox","galleryContainer","form","loader","loadMoreBtn","addImput","music","currentPage","perPage","searchQuery","maxPage","onLoadMore","e","data","fetchImages","gallery","iziToast","stopAudio","error","galleryContainerHeight","keyword","key","params","axios","galleryItem","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hits","galleryItemHtml"],"mappings":"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"}